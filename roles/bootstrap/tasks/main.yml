---
#-----------------------------------------------------
# pre tasks:
#
- name: main | "load OS-spezific variables"
  tags: base,vars
  ansible.builtin.include_vars:
    file: "all.yml"

- name: main | "load OS-spezific variables"
  tags: base,vars
  ansible.builtin.include_vars:
    file: "{{ ansible_distribution }}.yml"

- name: main | "load vault variables"
  tags: base,vars
  ansible.builtin.include_vars:
    file: "../../group_vars/vault.yml"

- name: Update and upgrade package packages
  tags: update
  package:
    update_cache: true
    upgrade: true
  become: true
- name: task_name | DEBUG - show loaded variables
  tags: tag1,tag2,debug
  debug:
    msg: 
      - "{{ ARCHITECT_USER_PASSWD}}"
      - "{{ MAIN_USER }}"
      - "{{ ARCHITECT_USER }}"


#-----------------------------------------------------
#   Main
#
- block:
  # software
  - import_tasks: software/packages_base.yml
  # create user
  - import_tasks: user/architect.yml
  - import_tasks: user/root.yml
  # system setup
  - import_tasks: system-setup/ansible_setup.yml
  - import_tasks: system-setup/clock.yml
  - import_tasks: system-setup/cron.yml
  - import_tasks: system-setup/locale.yml
  - import_tasks: system-setup/logging.yml
  - import_tasks: system-setup/ssh.yml

